function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(s){r=!0,o=s}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{cVV8:function(e,t,n){"use strict";n.r(t),n.d(t,"ItemListPageModule",(function(){return X}));var i=n("tyNb"),r=n("mrSG"),o=n("TEn/"),a=n("62S+"),c=n("NV1z"),s=n("XNiG"),u=n("VRyK"),l=n("4+uF"),d=n("LQgz"),b=n("fXoL"),g=n("3Pt+"),h=n("ofXK");function f(e,t){1&e&&b.Qb(0,"ion-icon",4)}function m(e,t){1&e&&b.Qb(0,"ion-icon",5)}var p,v=["*"],y=((p=function(){function e(){_classCallCheck(this,e),this.change=new b.n,this.isOpen=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"toggleAccordion",value:function(){this.isOpen=!this.isOpen}},{key:"broadcastName",value:function(e){this.change.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||p)},p.\u0275cmp=b.Jb({type:p,selectors:[["app-accordion"]],inputs:{name:"name",description:"description"},outputs:{change:"change"},ngContentSelectors:v,decls:6,vars:4,consts:[[1,"text-normal","bold",3,"click"],["name","chevron-up",4,"ngIf"],["name","chevron-down",4,"ngIf"],[3,"ngClass"],["name","chevron-up"],["name","chevron-down"]],template:function(e,t){1&e&&(b.lc(),b.Vb(0,"h5",0),b.dc("click",(function(){return t.toggleAccordion()})),b.Fc(1),b.Dc(2,f,1,0,"ion-icon",1),b.Dc(3,m,1,0,"ion-icon",2),b.Ub(),b.Vb(4,"div",3),b.kc(5),b.Ub()),2&e&&(b.Cb(1),b.Hc(" ",t.name," "),b.Cb(1),b.mc("ngIf",t.isOpen),b.Cb(1),b.mc("ngIf",!t.isOpen),b.Cb(1),b.mc("ngClass",t.isOpen?"active":"inactive"))},directives:[h.l,h.j,o.t],styles:["h5[_ngcontent-%COMP%]{background:#fff;color:var(--ion-color-medium);cursor:pointer;position:relative;padding:1em .35em;border-bottom:1px solid var(--ion-color-light-tint);margin:0}h5[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:absolute;right:1em;top:1.2em;font-size:.95em}div[_ngcontent-%COMP%]{position:relative}.active[_ngcontent-%COMP%]{display:block}.inactive[_ngcontent-%COMP%]{display:none}"]}),p),C=n("sYmb"),k=n("RKXm");function O(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-item"),b.Vb(1,"ion-checkbox",6),b.dc("ionChange",(function(e){return b.wc(n),b.gc().onCategoryChanged(e)}))("ngModelChange",(function(e){return b.wc(n),t.$implicit.isChecked=e})),b.Ub(),b.Vb(2,"ion-label",7),b.Fc(3),b.Ub(),b.Ub()}if(2&e){var i=t.$implicit,r=b.gc();b.Cb(1),b.mc("ngModel",i.isChecked)("disabled",r.isLoading),b.Cb(2),b.Hc(" ",i.name," ")}}function w(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-item"),b.Vb(1,"ion-checkbox",6),b.dc("ionChange",(function(e){return b.wc(n),b.gc().onBrandChanged(e)}))("ngModelChange",(function(e){return b.wc(n),t.$implicit.isChecked=e})),b.Ub(),b.Vb(2,"ion-label",7),b.Fc(3),b.Ub(),b.Ub()}if(2&e){var i=t.$implicit,r=b.gc();b.Cb(1),b.mc("ngModel",i.isChecked)("disabled",r.isLoading),b.Cb(2),b.Hc(" ",i.name," ")}}function x(e,t){if(1&e&&(b.Vb(0,"span"),b.Fc(1),b.hc(2,"translate"),b.Ub()),2&e){var n=b.gc();b.Cb(1),b.Ic(" ",b.ic(2,2,"SEE_THE_RESULTS")," (",n.count,") ")}}function _(e,t){1&e&&(b.Vb(0,"span"),b.Qb(1,"ion-spinner",22),b.Ub())}var V,M=((V=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,o){var a;return _classCallCheck(this,n),(a=t.call(this,e)).itemService=i,a.brandService=r,a.categoryService=o,a.params={},a.categories=[],a.brands=[],a.query={priceRange:{lower:10,upper:1e4},rating:{lower:0,upper:5}},a.minPrice=10,a.maxPrice=1e4,a.minRating=0,a.maxRating=5,a.count=0,a}return _createClass(n,[{key:"enableMenuSwipe",value:function(){return!1}},{key:"ngOnInit",value:function(){this.query.isFeatured="1"===this.params.featured,this.query.isOnSale="1"===this.params.sale,this.params.ratingMin&&(this.query.rating.lower=Number(this.params.ratingMin)),this.params.ratingMax&&(this.query.rating.upper=Number(this.params.ratingMax)),this.params.priceMin&&(this.query.priceRange.lower=Number(this.params.priceMin)),this.params.priceMax&&(this.query.priceRange.upper=Number(this.params.priceMax)),this.loadData()}},{key:"onDismiss",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.modalCtrl.dismiss(e)}},{key:"loadData",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i,r,o,a,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.categoryService.load(),n=this.brandService.load({categories:this.params.cat}),e.next=5,Promise.all([t,n]);case 5:i=e.sent,r=_slicedToArray(i,2),o=r[0],a=r[1],this.categories=o.map((function(e){var t=!1;return c.params.cat&&(t=Array.isArray(c.params.cat)?c.params.cat.includes(e.id):c.params.cat===e.id),{id:e.id,name:e.name,isChecked:t}})),this.brands=a.map((function(e){var t=!1;return c.params.brand&&(t=Array.isArray(c.params.brand)?c.params.brand.includes(e.id):c.params.brand===e.id),{id:e.id,name:e.name,isChecked:t}})),this.loadCount(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})))}},{key:"loadBrands",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandService.load(e);case 2:n=t.sent,this.brands=n.map((function(e){return{id:e.id,name:e.name,isChecked:!1}}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onCategoryChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.className.includes("interactive")&&(n=this.categories.filter((function(e){return e.isChecked})).map((function(e){return e.id})),this.query.cat=n,delete this.query.brand,this.loadBrands({categories:n}),this.loadCount());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onBrandChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.className.includes("interactive")&&(n=this.brands.filter((function(e){return e.isChecked})).map((function(e){return e.id})),this.query.brand=n,this.loadCount());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onQueryChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.className.includes("interactive")&&this.loadCount();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"onRangeChanged",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadCount();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"loadCount",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isLoading=!0,e.next=4,function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"shuffle",value:function(e){return e.map((function(e){return[Math.random(),e]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"chunk",value:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=n[n.length-1];r&&r.length!==t?r.push(e[i]):n.push([e[i]])}return n}}]),e}().sleep(1500);case 4:return e.next=6,this.itemService.count(this.query);case 6:this.count=e.sent,this.isLoading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.isLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[0,10]])})))}},{key:"onApplyButtonTouched",value:function(){var e={};e.featured=this.query.isFeatured?"1":"0",e.sale=this.query.isOnSale?"1":"0",e.ratingMin=this.query.rating.lower.toString(),e.ratingMax=this.query.rating.upper.toString(),e.priceMin=this.query.priceRange.lower.toString(),e.priceMax=this.query.priceRange.upper.toString(),e.cat=this.query.cat,e.brand=this.query.brand,this.onDismiss(e)}},{key:"trackByFn",value:function(e,t){return t?t.id:null}}]),n}(c.a)).\u0275fac=function(e){return new(e||V)(b.Pb(b.r),b.Pb(a.a),b.Pb(d.a),b.Pb(l.a))},V.\u0275cmp=b.Jb({type:V,selectors:[["app-filter"]],inputs:{params:"params"},features:[b.zb],decls:46,vars:43,consts:[[1,"ion-no-border"],["slot","end"],[3,"click"],["slot","start","name","close"],[1,"ion-text-center"],[1,"ion-margin-top"],[3,"ngModel","disabled","ionChange","ngModelChange"],["color","medium",1,"ion-margin-horizontal"],["lines","none"],["color","medium"],[1,"text-normal","bold"],[1,"ion-padding-bottom"],["debounce","1500","color","dark","step","1","dualKnobs","true","pin","true",3,"min","max","disabled","ngModel","ngModelChange","ionChange"],[1,"ion-margin-bottom"],[1,"text-normal","bold","ion-no-margin"],[1,"text-medium","bold"],["debounce","1500","color","dark","step","10","dualKnobs","true","pin","true",3,"min","max","disabled","ngModel","ngModelChange","ionChange"],[3,"name"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-padding","ion-text-center"],["strong","","color","dark",3,"disabled","click"],[4,"ngIf"],["name","dots","color","light"]],template:function(e,t){1&e&&(b.Vb(0,"ion-header",0),b.Vb(1,"ion-toolbar"),b.Qb(2,"ion-title"),b.Vb(3,"ion-buttons",1),b.Vb(4,"ion-button",2),b.dc("click",(function(){return t.onDismiss()})),b.Qb(5,"ion-icon",3),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(6,"ion-content",4),b.Vb(7,"ion-item",5),b.Vb(8,"ion-checkbox",6),b.dc("ionChange",(function(e){return t.onQueryChanged(e)}))("ngModelChange",(function(e){return t.query.isFeatured=e})),b.Ub(),b.Vb(9,"ion-label",7),b.Fc(10),b.hc(11,"translate"),b.Ub(),b.Ub(),b.Vb(12,"ion-item",8),b.Vb(13,"ion-checkbox",6),b.dc("ionChange",(function(e){return t.onQueryChanged(e)}))("ngModelChange",(function(e){return t.query.isOnSale=e})),b.Ub(),b.Vb(14,"ion-label",7),b.Fc(15),b.hc(16,"translate"),b.Ub(),b.Ub(),b.Vb(17,"div"),b.Vb(18,"ion-text",9),b.Vb(19,"h5",10),b.Fc(20),b.hc(21,"translate"),b.Ub(),b.Ub(),b.Vb(22,"ion-item",11),b.Vb(23,"ion-range",12),b.dc("ngModelChange",(function(e){return t.query.rating=e}))("ionChange",(function(e){return t.onRangeChanged(e)})),b.Ub(),b.Ub(),b.Ub(),b.Vb(24,"div",13),b.Vb(25,"ion-text",9),b.Vb(26,"h5",14),b.Fc(27),b.hc(28,"translate"),b.Ub(),b.Vb(29,"p",15),b.Fc(30),b.hc(31,"currencyGlobal"),b.hc(32,"currencyGlobal"),b.Ub(),b.Ub(),b.Vb(33,"ion-item",11),b.Vb(34,"ion-range",16),b.dc("ngModelChange",(function(e){return t.query.priceRange=e}))("ionChange",(function(e){return t.onRangeChanged(e)})),b.Ub(),b.Ub(),b.Ub(),b.Vb(35,"app-accordion",17),b.hc(36,"translate"),b.Dc(37,O,4,3,"ion-item",18),b.Ub(),b.Vb(38,"app-accordion",17),b.hc(39,"translate"),b.Dc(40,w,4,3,"ion-item",18),b.Ub(),b.Ub(),b.Vb(41,"ion-footer",19),b.Vb(42,"ion-button",20),b.dc("click",(function(){return t.onApplyButtonTouched()})),b.Dc(43,x,3,4,"span",21),b.Fc(44,"\xa0 "),b.Dc(45,_,2,0,"span",21),b.Ub(),b.Ub()),2&e&&(b.Cb(8),b.mc("ngModel",t.query.isFeatured)("disabled",t.isLoading),b.Cb(2),b.Hc(" ",b.ic(11,27,"FEATURED")," "),b.Cb(3),b.mc("ngModel",t.query.isOnSale)("disabled",t.isLoading),b.Cb(2),b.Hc(" ",b.ic(16,29,"ON_SALE")," "),b.Cb(5),b.Hc(" ",b.ic(21,31,"RATING")," "),b.Cb(3),b.mc("min",t.minRating)("max",t.maxRating)("disabled",t.isLoading)("ngModel",t.query.rating),b.Cb(4),b.Hc(" ",b.ic(28,33,"PRICE")," "),b.Cb(3),b.Ic(" ",b.ic(31,35,t.query.priceRange.lower)," - ",b.ic(32,37,t.query.priceRange.upper)," "),b.Cb(4),b.mc("min",t.minPrice)("max",t.maxPrice)("disabled",t.isLoading)("ngModel",t.query.priceRange),b.Cb(1),b.mc("name",b.ic(36,39,"CATEGORIES")),b.Cb(2),b.mc("ngForOf",t.categories)("ngForTrackBy",t.trackByFn),b.Cb(1),b.mc("name",b.ic(39,41,"BRANDS")),b.Cb(2),b.mc("ngForOf",t.brands)("ngForTrackBy",t.trackByFn),b.Cb(2),b.mc("disabled",t.isLoading),b.Cb(1),b.mc("ngIf",!t.isLoading),b.Cb(2),b.mc("ngIf",t.isLoading))},directives:[o.s,o.Y,o.W,o.k,o.j,o.t,o.p,o.x,o.n,o.c,g.i,g.k,o.z,o.T,o.E,o.hb,y,h.k,o.q,h.l,o.P],pipes:[C.c,k.a],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)}ion-list[_ngcontent-%COMP%]{background:transparent}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:var(--ion-item-light);--detail-icon-color:var(--ion-color-dark)}ion-list[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background:var(--ion-color-light-shade)}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:200px}"]}),V),R=n("R0Ic"),P=n("gNTI"),U=n("4ro/"),F=n("v5se"),S=function(e){return[e]};function I(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-item",24),b.dc("click",(function(){return b.wc(n),b.gc(3).suggestions=[]})),b.Vb(1,"ion-label"),b.Vb(2,"ion-text",25),b.Vb(3,"span",26),b.Fc(4),b.Ub(),b.Ub(),b.Ub(),b.Ub()}if(2&e){var i=t.$implicit;b.mc("routerLink",b.qc(2,S,"./"+i.slug)),b.Cb(4),b.Hc(" ",i.name," ")}}function T(e,t){if(1&e&&(b.Vb(0,"ion-list",22),b.Dc(1,I,5,4,"ion-item",23),b.Ub()),2&e){var n=b.gc(2);b.mc("@staggerIn",n.suggestions.length),b.Cb(1),b.mc("ngForOf",n.suggestions)("ngForTrackBy",n.trackByFn)}}function j(e,t){if(1&e&&(b.Vb(0,"ion-grid",20),b.Dc(1,T,2,3,"ion-list",21),b.Ub()),2&e){var n=b.gc();b.Cb(1),b.mc("ngIf",n.suggestions.length)}}function L(e,t){1&e&&(b.Vb(0,"div",27),b.Qb(1,"ion-spinner"),b.Ub())}function A(e,t){1&e&&(b.Qb(0,"empty-view",28),b.hc(1,"translate")),2&e&&b.mc("text",b.ic(1,1,"ERROR_DATA"))}function B(e,t){1&e&&(b.Qb(0,"empty-view",29),b.hc(1,"translate")),2&e&&b.mc("text",b.ic(1,1,"EMPTY_DATA"))}function D(e,t){if(1&e&&(b.Vb(0,"ion-select-option",35),b.Fc(1),b.hc(2,"translate"),b.hc(3,"uppercase"),b.Ub()),2&e){var n=t.$implicit;b.mc("value",n),b.Cb(1),b.Hc(" ",b.ic(2,2,b.ic(3,4,n.sortByField+"_"+n.sortBy))," ")}}function E(e,t){if(1&e){var n=b.Wb();b.Vb(0,"div",30),b.Vb(1,"ion-item",31),b.Vb(2,"ion-label"),b.Vb(3,"ion-text",32),b.Fc(4),b.hc(5,"translate"),b.Ub(),b.Ub(),b.Vb(6,"ion-select",33),b.dc("ngModelChange",(function(e){return b.wc(n),b.gc().selectedSortOption=e}))("ionChange",(function(e){return b.wc(n),b.gc().onSortOptionTouched(e)})),b.Dc(7,D,4,6,"ion-select-option",34),b.Ub(),b.Ub(),b.Ub()}if(2&e){var i=b.gc();b.Cb(4),b.Hc(" ",b.ic(5,5,"SORT_BY")," "),b.Cb(2),b.mc("ngModel",i.selectedSortOption)("compareWith",i.compareSortOption)("interfaceOptions",i.customPopoverOptions),b.Cb(1),b.mc("ngForOf",i.sortOptions)}}function Q(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-col",38),b.Vb(1,"app-shop-item",39),b.dc("click",(function(){b.wc(n);var e=t.$implicit;return b.gc(2).onItemTouched(e)})),b.Ub(),b.Ub()}if(2&e){var i=t.$implicit,r=b.gc(2);b.Cb(1),b.mc("item",i)("customObservable",r.loadAndScroll)}}function q(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-list"),b.Vb(1,"ion-row"),b.Dc(2,Q,2,2,"ion-col",36),b.Ub(),b.Vb(3,"ion-infinite-scroll",37),b.dc("ionInfinite",(function(e){return b.wc(n),b.gc().onLoadMore(e)})),b.Qb(4,"ion-infinite-scroll-content"),b.Ub(),b.Ub()}if(2&e){var i=b.gc();b.mc("@staggerIn",i.items.length),b.Cb(2),b.mc("ngForOf",i.items)("ngForTrackBy",i.trackByFn)}}function N(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-col"),b.Vb(1,"app-shop-item",41),b.dc("click",(function(){b.wc(n);var e=t.$implicit;return b.gc(2).onItemTouched(e)})),b.Ub(),b.Ub()}if(2&e){var i=t.$implicit,r=b.gc(2);b.Db("size-xs",12/(null==r.layout||null==r.layout.item?null:r.layout.item.columnsXs))("size-md",12/(null==r.layout||null==r.layout.item?null:r.layout.item.columnsMd))("size-lg",12/(null==r.layout||null==r.layout.item?null:r.layout.item.columnsLg)),b.Cb(1),b.mc("styles",null==r.layout?null:r.layout.item)("item",i)("customObservable",r.loadAndScroll)}}function z(e,t){if(1&e){var n=b.Wb();b.Vb(0,"ion-list"),b.Vb(1,"ion-row"),b.Dc(2,N,2,6,"ion-col",40),b.Ub(),b.Vb(3,"ion-infinite-scroll",37),b.dc("ionInfinite",(function(e){return b.wc(n),b.gc().onLoadMore(e)})),b.Qb(4,"ion-infinite-scroll-content"),b.Ub(),b.Ub()}if(2&e){var i=b.gc();b.mc("@staggerIn",i.items.length),b.Cb(2),b.mc("ngForOf",i.items)("ngForTrackBy",i.trackByFn)}}var H,W,$,G=((H=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var o;return _classCallCheck(this,n),(o=t.call(this,e)).appConfigService=i,o.itemService=r,o.items=[],o.skeletonArray=Array(32),o.params={page:0,limit:20},o.suggestions=[],o.customPopoverOptions={},o}return _createClass(n,[{key:"onFocus",value:function(){this.onContentLoaded()}},{key:"ngOnInit",value:function(){this.buildSortOptions(),this.setupObservables(),this.setupQueryParams()}},{key:"setupObservables",value:function(){this.contentLoaded=new s.a,this.loadAndScroll=Object(u.a)(this.content.ionScroll,this.contentLoaded)}},{key:"setupQueryParams",value:function(){this.params.sale=this.getQueryParams().sale,this.params.new=this.getQueryParams().new,this.params.featured=this.getQueryParams().featured,this.params.ratingMin=this.getQueryParams().ratingMin,this.params.ratingMax=this.getQueryParams().ratingMax,this.params.priceMin=this.getQueryParams().priceMin,this.params.priceMax=this.getQueryParams().priceMax,this.params.cat=this.getQueryParams().cat,this.params.subcat=this.getQueryParams().subcat,this.params.brand=this.getQueryParams().brand}},{key:"enableMenuSwipe",value:function(){return!1}},{key:"ionViewDidEnter",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.items.length||(this.showLoadingView({showOverlay:!1}),this.loadData()),e.next=3,this.getTrans("ITEMS");case 3:t=e.sent,this.setPageTitle(t),this.setMetaTags({title:t});case 5:case"end":return e.stop()}}),e,this)})))}},{key:"buildSortOptions",value:function(){this.sortOptions=[{sortBy:"desc",sortByField:"createdAt"},{sortBy:"asc",sortByField:"netPrice"},{sortBy:"desc",sortByField:"netPrice"},{sortBy:"desc",sortByField:"ratingTotal"}];var e=this.getQueryParams().sortBy,t=this.getQueryParams().sortByField;this.selectedSortOption=e&&t?{sortBy:e,sortByField:t}:this.sortOptions[0]}},{key:"onSortOptionTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e.detail.value);delete t.id,this.params=Object.assign(Object.assign({},this.params),t),this.onRefresh(),this.navigateToRelative(".",t)}},{key:"compareSortOption",value:function(e,t){return e&&t?e.sortBy===t.sortBy&&e.sortByField===t.sortByField:e===t}},{key:"onRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.refresher=e.target,this.items=[],this.params.page=0,this.loadData()}},{key:"onContentLoaded",value:function(){var e=this;setTimeout((function(){e.contentLoaded.next()}),400)}},{key:"loadData",value:function(){var e;return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r,o,a,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.appConfigService.load();case 3:return n=t.sent,this.layout=null===(e=null==n?void 0:n.layout)||void 0===e?void 0:e.itemList,t.next=7,this.itemService.load(this.params);case 7:i=t.sent,r=_createForOfIteratorHelper(i);try{for(r.s();!(o=r.n()).done;)a=o.value,this.items.push(a)}catch(s){r.e(s)}finally{r.f()}this.items.length?this.showContentView():this.showEmptyView(),this.onRefreshComplete(i),this.onContentLoaded(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),this.items.length?this.showContentView():this.showErrorView(),this.onRefreshComplete(),this.translate.get("ERROR_NETWORK").subscribe((function(e){return c.showToast(e)}));case 16:case"end":return t.stop()}}),t,this,[[0,13]])})))}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.target.value)){t.next=11;break}return t.prev=2,t.next=5,this.itemService.load({tag:n.toLowerCase(),limit:10});case 5:this.suggestions=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,this,[[2,8]])})))}},{key:"onClearSearch",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suggestions=[];case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onLoadMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.infiniteScroll=e.target,this.params.page++,this.loadData()}},{key:"onPresentFilterModal",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,i,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showLoadingView({showOverlay:!0});case 2:return t=Object.assign({},this.params),n=["sale","featured","ratingMin","ratingMax","priceMin","priceMax","cat","brand"],i=Object.keys(t).filter((function(e){return n.includes(e)})).reduce((function(e,n){return e[n]=t[n],e}),{}),e.next=7,this.modalCtrl.create({component:M,componentProps:{params:i}});case 7:return r=e.sent,e.next=10,r.present();case 10:return this.dismissLoadingView(),e.next=13,r.onDidDismiss();case 13:o=e.sent,(a=o.data)&&(c=Object.assign(Object.assign({},this.params),a),this.params=c,this.showLoadingView({showOverlay:!1}),this.onRefresh(),this.navigateToRelative(".",a));case 16:case"end":return e.stop()}}),e,this)})))}},{key:"onItemTouched",value:function(e){var t=this.router.url.split("?")[0];this.navigateTo(t+"/"+e.slug)}},{key:"trackByFn",value:function(e,t){return t?t.id:null}}]),n}(c.a)).\u0275fac=function(e){return new(e||H)(b.Pb(b.r),b.Pb(P.a),b.Pb(a.a))},H.\u0275cmp=b.Jb({type:H,selectors:[["page-item-list"]],viewQuery:function(e,t){var n;1&e&&b.Bc(o.p,!0),2&e&&b.tc(n=b.ec())&&(t.content=n.first)},hostBindings:function(e,t){1&e&&b.dc("focus",(function(){return t.onFocus()}),!1,b.vc)},features:[b.zb],decls:27,vars:19,consts:[[1,"ion-no-border"],["fixed",""],["slot","start"],["defaultHref","/"],["mode","ios",3,"placeholder","ionInput","ionClear"],["slot","end"],["color","dark","size","small",1,"ion-text-uppercase",3,"click"],["slot","start","name","funnel"],[1,"text-small"],["scrollEvents","true"],["container",""],["slot","fixed",3,"ionRefresh"],[3,"pullingText","refreshingText"],["slot","fixed",2,"left","16px","right","16px"],["class","relative","fixed","",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["icon","alert-circle-outline",3,"text",4,"ngIf"],["image","./assets/imgs/undraw_search.svg","imageWidth","100",3,"text",4,"ngIf"],["class","custom-select ion-margin-vertical",4,"ngIf"],[4,"ngIf"],["fixed","",1,"relative"],["lines","none","class","ion-no-margin","class","shadow autocomplete",4,"ngIf"],["lines","none",1,"shadow","autocomplete"],["class","hover","button","","detail","false","style","--min-height: 70px;",3,"routerLink","click",4,"ngFor","ngForOf","ngForTrackBy"],["button","","detail","false",1,"hover",2,"--min-height","70px",3,"routerLink","click"],["color","dark"],[1,"link","bold","text-medium"],[1,"ion-text-center"],["icon","alert-circle-outline",3,"text"],["image","./assets/imgs/undraw_search.svg","imageWidth","100",3,"text"],[1,"custom-select","ion-margin-vertical"],["lines","none"],["color","medium",1,"bold"],["interface","popover",3,"ngModel","compareWith","interfaceOptions","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size-xs","6","size-sm","4","size-md","4","size-lg","3",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ionInfinite"],["size-xs","6","size-sm","4","size-md","4","size-lg","3"],[3,"item","customObservable","click"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"styles","item","customObservable","click"]],template:function(e,t){1&e&&(b.Vb(0,"ion-header",0),b.Vb(1,"ion-toolbar",1),b.Vb(2,"ion-buttons",2),b.Qb(3,"ion-back-button",3),b.Ub(),b.Vb(4,"ion-searchbar",4),b.dc("ionInput",(function(e){return t.onSearch(e)}))("ionClear",(function(){return t.onClearSearch()})),b.hc(5,"translate"),b.Ub(),b.Vb(6,"ion-buttons",5),b.Vb(7,"ion-button",6),b.dc("click",(function(){return t.onPresentFilterModal()})),b.Qb(8,"ion-icon",7),b.Vb(9,"span",8),b.Fc(10),b.hc(11,"translate"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(12,"ion-content",9,10),b.Vb(14,"ion-refresher",11),b.dc("ionRefresh",(function(e){return t.onRefresh(e)})),b.Qb(15,"ion-refresher-content",12),b.hc(16,"translate"),b.hc(17,"translate"),b.Ub(),b.Vb(18,"div",13),b.Dc(19,j,2,1,"ion-grid",14),b.Ub(),b.Vb(20,"ion-grid",1),b.Dc(21,L,2,0,"div",15),b.Dc(22,A,2,3,"empty-view",16),b.Dc(23,B,2,3,"empty-view",17),b.Dc(24,E,8,7,"div",18),b.Dc(25,q,5,3,"ion-list",19),b.Dc(26,z,5,3,"ion-list",19),b.Ub(),b.Ub()),2&e&&(b.Cb(4),b.mc("placeholder",b.ic(5,11,"SEARCH_PLACEHOLDER")),b.Cb(6),b.Gc(b.ic(11,13,"REFINE")),b.Cb(5),b.nc("pullingText",b.ic(16,15,"PULL_TO_REFRESH")),b.nc("refreshingText",b.ic(17,17,"REFRESHING")),b.Cb(4),b.mc("ngIf",t.suggestions.length),b.Cb(2),b.mc("ngIf",t.isLoadingViewVisible),b.Cb(1),b.mc("ngIf",t.isErrorViewVisible),b.Cb(1),b.mc("ngIf",t.isEmptyViewVisible),b.Cb(1),b.mc("ngIf",t.isContentViewVisible),b.Cb(1),b.mc("ngIf",t.isContentViewVisible&&!(null!=t.layout&&t.layout.enabled)),b.Cb(1),b.mc("ngIf",t.isContentViewVisible&&(null==t.layout?null:t.layout.enabled)))},directives:[o.s,o.Y,o.k,o.g,o.h,o.K,o.ib,o.j,o.t,o.p,o.F,o.G,h.l,o.r,o.A,h.k,o.x,i.h,o.gb,o.z,o.T,o.P,U.a,o.L,o.hb,g.i,g.k,o.M,o.J,o.u,o.v,o.o,F.a],pipes:[C.c,h.u],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)}ion-grid[_ngcontent-%COMP%]{background:#fff}ion-searchbar[_ngcontent-%COMP%]{padding:0 8px!important}ion-buttons[_ngcontent-%COMP%]{align-self:center}.custom-select[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{display:inline-block}.custom-select[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px}.custom-select[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{max-width:100%}"],data:{animation:[Object(R.l)("staggerIn",[Object(R.k)("* => *",[Object(R.f)(":enter",Object(R.j)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(R.f)(":enter",Object(R.h)("100ms",[Object(R.e)("300ms",Object(R.j)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),H),K=n("d2mR"),J=(($=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:$}),$.\u0275inj=b.Mb({factory:function(e){return new(e||$)},imports:[[h.c,g.e,o.Z,K.a]]}),$),X=((W=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:W}),W.\u0275inj=b.Mb({factory:function(e){return new(e||W)},imports:[[i.i.forChild([{path:"",component:G}]),K.a,J,g.e]]}),W)},gNTI:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("v0iw"),r=n("fXoL"),o=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"AppConfig")}return _createClass(n,[{key:"load",value:function(){return i.Cloud.run("getAppConfig")}},{key:"about",get:function(){return this.get("about")}},{key:"admin",get:function(){return this.get("admin")}},{key:"layout",get:function(){return this.get("layout")}},{key:"auth",get:function(){return this.get("auth")}}]),n}(i.Object);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();i.Object.registerSubclass("AppConfig",o)}}]);