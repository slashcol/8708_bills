function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{gNTI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("v0iw"),o=n("fXoL"),r=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"AppConfig")}return _createClass(n,[{key:"load",value:function(){return i.Cloud.run("getAppConfig")}},{key:"about",get:function(){return this.get("about")}},{key:"admin",get:function(){return this.get("admin")}},{key:"layout",get:function(){return this.get("layout")}},{key:"auth",get:function(){return this.get("auth")}}]),n}(i.Object);return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();i.Object.registerSubclass("AppConfig",r)},u7ds:function(e,t,n){"use strict";n.r(t),n.d(t,"CategoryListPageModule",(function(){return j}));var i=n("tyNb"),o=n("mrSG"),r=n("TEn/"),a=n("4+uF"),c=n("NV1z"),s=n("eijT"),l=n("XNiG"),u=n("VRyK"),g=n("62S+"),b=n("R0Ic"),f=n("gNTI"),h=n("fXoL"),d=n("ofXK"),p=n("4ro/"),m=n("wf0l"),v=n("sYmb");function y(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ion-item",18),h.dc("click",(function(){h.wc(n);var e=t.$implicit;return h.gc(3).onSuggestionTouched(e)})),h.Vb(1,"ion-label"),h.Vb(2,"ion-text",19),h.Vb(3,"span",20),h.Fc(4),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit;h.Cb(4),h.Hc(" ",i.name," ")}}function C(e,t){if(1&e&&(h.Vb(0,"ion-list",16),h.Dc(1,y,5,1,"ion-item",17),h.Ub()),2&e){var n=h.gc(2);h.mc("@staggerIn",n.suggestions.length),h.Cb(1),h.mc("ngForOf",n.suggestions)}}function w(e,t){if(1&e&&(h.Vb(0,"ion-grid",14),h.Dc(1,C,2,2,"ion-list",15),h.Ub()),2&e){var n=h.gc();h.Cb(1),h.mc("ngIf",n.suggestions.length)}}function k(e,t){1&e&&(h.Vb(0,"div",21),h.Qb(1,"ion-spinner"),h.Ub())}function x(e,t){1&e&&(h.Qb(0,"empty-view",22),h.hc(1,"translate")),2&e&&h.mc("text",h.ic(1,1,"ERROR_DATA"))}function O(e,t){1&e&&(h.Qb(0,"empty-view",22),h.hc(1,"translate")),2&e&&h.mc("text",h.ic(1,1,"EMPTY_DATA"))}function _(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ion-col",29),h.dc("click",(function(){h.wc(n);var e=t.$implicit;return h.gc(2).goToSubCategoryPage(e)})),h.Qb(1,"div",30),h.Vb(2,"ion-text",19),h.Vb(3,"p",31),h.Fc(4),h.Ub(),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit,o=h.gc(2);h.Cb(1),h.mc("lazyLoad",null==i.imageThumb?null:i.imageThumb.url())("customObservable",o.loadAndScroll),h.Cb(3),h.Hc(" ",i.name," ")}}function V(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ion-row",23),h.Vb(1,"ion-col",24),h.Vb(2,"div",25),h.dc("click",(function(){return h.wc(n),h.gc().onViewAll()})),h.Vb(3,"div",26),h.Vb(4,"p",27),h.Fc(5),h.hc(6,"translate"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Dc(7,_,5,3,"ion-col",28),h.Ub()}if(2&e){var i=h.gc();h.mc("@staggerIn",i.categories.length),h.Cb(5),h.Gc(h.ic(6,4,"VIEW_ALL")),h.Cb(2),h.mc("ngForOf",i.categories)("ngForTrackBy",i.trackByFn)}}function P(e,t){if(1&e&&(h.Vb(0,"ion-text",40),h.Vb(1,"h5",27),h.Fc(2),h.Ub(),h.Ub()),2&e){var n=h.gc().$implicit,i=h.gc(2);h.Cb(1),h.Cc("font-size",null==i.layout||null==i.layout.item?null:i.layout.item.fontSize),h.Cb(1),h.Hc(" ",n.name," ")}}function R(e,t){if(1&e){var n=h.Wb();h.Vb(0,"ion-col"),h.Vb(1,"div",34),h.dc("click",(function(){h.wc(n);var e=t.$implicit;return h.gc(2).goToSubCategoryPage(e)})),h.Vb(2,"div",35),h.Qb(3,"div",36),h.Vb(4,"div",37),h.Dc(5,P,3,3,"ion-text",38),h.Ub(),h.Ub(),h.Qb(6,"ion-ripple-effect",39),h.Ub(),h.Ub()}if(2&e){var i=t.$implicit,o=h.gc(2);h.Db("size-xs",12/(null==o.layout||null==o.layout.item?null:o.layout.item.columnsXs))("size-md",12/(null==o.layout||null==o.layout.item?null:o.layout.item.columnsMd))("size-lg",12/(null==o.layout||null==o.layout.item?null:o.layout.item.columnsLg)),h.Cb(2),h.Cc("box-shadow",null==o.layout||null==o.layout.item?null:o.layout.item.boxShadow)("margin",null==o.layout||null==o.layout.item?null:o.layout.item.margin)("height",null==o.layout||null==o.layout.item?null:o.layout.item.height)("border-radius",null==o.layout||null==o.layout.item?null:o.layout.item.radius),h.Cb(1),h.mc("lazyLoad",null==i.image?null:i.image.url())("customObservable",o.loadAndScroll),h.Cb(2),h.mc("ngIf",!(null!=o.layout&&null!=o.layout.item&&o.layout.item.hideTitle))}}function T(e,t){if(1&e&&(h.Vb(0,"ion-row",32),h.Dc(1,R,7,14,"ion-col",33),h.Ub()),2&e){var n=h.gc();h.mc("@staggerIn",n.categories.length),h.Cb(1),h.mc("ngForOf",n.categories)("ngForTrackBy",n.trackByFn)}}var S,I,U=((S=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,o,r,a){var c;return _classCallCheck(this,n),(c=t.call(this,e)).categoryService=i,c.itemService=o,c.appConfigService=r,c.subCategoryService=a,c.categories=[],c.params={},c.skeletonArray=Array(32),c.suggestions=[],c}return _createClass(n,[{key:"onFocus",value:function(){this.onContentLoaded()}},{key:"enableMenuSwipe",value:function(){return!1}},{key:"ngOnInit",value:function(){this.setupObservable()}},{key:"ionViewWillEnter",value:function(){this.container&&this.container.scrollToTop()}},{key:"ionViewDidEnter",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.categories.length){e.next=4;break}this.onContentLoaded(),e.next=7;break;case 4:return e.next=6,this.showLoadingView({showOverlay:!1});case 6:this.loadData();case 7:return e.next=9,this.getTrans("CATEGORIES");case 9:t=e.sent,this.setPageTitle(t),this.setMetaTags({title:t});case 11:case"end":return e.stop()}}),e,this)})))}},{key:"setupObservable",value:function(){this.contentLoaded=new l.a,this.loadAndScroll=Object(u.a)(this.container.ionScroll,this.contentLoaded)}},{key:"onContentLoaded",value:function(){var e=this;setTimeout((function(){e.contentLoaded.next()}),400)}},{key:"loadData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.refresher=t.target,n.prev=1,n.next=4,this.appConfigService.load();case 4:return i=n.sent,this.layout=null===(e=null==i?void 0:i.layout)||void 0===e?void 0:e.categoryList,n.next=8,this.categoryService.load(this.params);case 8:this.categories=n.sent,this.categories.length?this.showContentView():this.showEmptyView(),this.onRefreshComplete(),this.onContentLoaded(),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(1),this.translate.get("ERROR_NETWORK").subscribe((function(e){return o.showToast(e)})),this.onRefreshComplete(),this.showErrorView();case 17:case"end":return n.stop()}}),n,this,[[1,14]])})))}},{key:"isPathFromHome",value:function(){return"/1/home/categories"===this.router.url}},{key:"onViewAll",value:function(){var e=this.isPathFromHome()?"../":"./";this.navigateToRelative(e+"items")}},{key:"onSuggestionTouched",value:function(e){this.suggestions=[];var t=this.isPathFromHome()?"../":"./";this.navigateToRelative(t+"items/"+e.slug)}},{key:"goToSubCategoryPage",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.isPathFromHome()?"../":"./",t.prev=1,!(e.subCategoryCount>0)){t.next=6;break}this.navigateToRelative(n+"subcategories",{categoryId:e.id}),t.next=20;break;case 6:if(0!==e.subCategoryCount){t.next=10;break}this.navigateToRelative(n+"items",{cat:e.id}),t.next=20;break;case 10:return t.next=12,this.showLoadingView({showOverlay:!1});case 12:return t.next=14,this.subCategoryService.count({category:e});case 14:if(!t.sent){t.next=18;break}this.navigateToRelative(n+"subcategories",{categoryId:e.id}),t.next=19;break;case 18:this.navigateToRelative(n+"items",{cat:e.id});case 19:this.showContentView();case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),this.showContentView(),this.translate.get("ERROR_NETWORK").subscribe((function(e){return i.showToast(e)}));case 25:case"end":return t.stop()}}),t,this,[[1,22]])})))}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.target.value)){t.next=11;break}return t.prev=2,t.next=5,this.itemService.load({tag:n.toLowerCase(),limit:10});case 5:this.suggestions=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,this,[[2,8]])})))}},{key:"onClearSearch",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suggestions=[];case 1:case"end":return e.stop()}}),e,this)})))}},{key:"trackByFn",value:function(e,t){return t?t.id:null}}]),n}(c.a)).\u0275fac=function(e){return new(e||S)(h.Pb(h.r),h.Pb(a.a),h.Pb(g.a),h.Pb(f.a),h.Pb(s.a))},S.\u0275cmp=h.Jb({type:S,selectors:[["page-category-list"]],viewQuery:function(e,t){var n;1&e&&h.Bc(r.p,!0),2&e&&h.tc(n=h.ec())&&(t.container=n.first)},hostBindings:function(e,t){1&e&&h.dc("focus",(function(){return t.onFocus()}),!1,h.vc)},features:[h.zb],decls:21,vars:15,consts:[[1,"ion-no-border"],["fixed",""],["slot","start"],["mode","ios",3,"placeholder","ionClear","ionChange"],["scrollEvents","true"],["container",""],["slot","fixed",3,"ionRefresh"],[3,"pullingText","refreshingText"],["slot","fixed",2,"left","16px","right","16px"],["class","relative","fixed","",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["icon","alert-circle-outline",3,"text",4,"ngIf"],["class","ion-margin-vertical",4,"ngIf"],["class","ion-margin-vertical ion-padding",4,"ngIf"],["fixed","",1,"relative"],["lines","none","class","ion-no-margin","class","shadow autocomplete",4,"ngIf"],["lines","none",1,"shadow","autocomplete"],["class","hover","button","","detail","false","style","--min-height: 70px;",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",1,"hover",2,"--min-height","70px",3,"click"],["color","dark"],[1,"link","bold","text-medium"],[1,"ion-text-center"],["icon","alert-circle-outline",3,"text"],[1,"ion-margin-vertical"],["size-xs","3",1,"ion-text-center"],[1,"circle","dark-bg",3,"click"],[1,"circle-inner"],[1,"bold","link"],["size-xs","3","class","ion-text-center",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["size-xs","3",1,"ion-text-center",3,"click"],["defaultImage","./assets/imgs/placeholder.png",1,"circle","bg-img",3,"lazyLoad","customObservable"],[1,"link","margin-6","text-medium"],[1,"ion-margin-vertical","ion-padding"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"ion-activatable","full-width",3,"click"],[1,"card"],["defaultImage","./assets/imgs/placeholder.png",1,"bg-img",3,"lazyLoad","customObservable"],[1,"content"],["color","light",4,"ngIf"],["type","bounded"],["color","light"]],template:function(e,t){1&e&&(h.Vb(0,"ion-header",0),h.Vb(1,"ion-toolbar",1),h.Vb(2,"ion-buttons",2),h.Qb(3,"ion-back-button"),h.Ub(),h.Vb(4,"div"),h.Vb(5,"ion-searchbar",3),h.dc("ionClear",(function(){return t.onClearSearch()}))("ionChange",(function(e){return t.onSearch(e)})),h.hc(6,"translate"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(7,"ion-content",4,5),h.Vb(9,"ion-refresher",6),h.dc("ionRefresh",(function(e){return t.loadData(e)})),h.Qb(10,"ion-refresher-content",7),h.hc(11,"translate"),h.hc(12,"translate"),h.Ub(),h.Vb(13,"div",8),h.Dc(14,w,2,1,"ion-grid",9),h.Ub(),h.Vb(15,"ion-grid",1),h.Dc(16,k,2,0,"div",10),h.Dc(17,x,2,3,"empty-view",11),h.Dc(18,O,2,3,"empty-view",11),h.Dc(19,V,8,6,"ion-row",12),h.Dc(20,T,2,3,"ion-row",13),h.Ub(),h.Ub()),2&e&&(h.Cb(5),h.mc("placeholder",h.ic(6,9,"SEARCH_PLACEHOLDER")),h.Cb(5),h.nc("pullingText",h.ic(11,11,"PULL_TO_REFRESH")),h.nc("refreshingText",h.ic(12,13,"REFRESHING")),h.Cb(4),h.mc("ngIf",t.suggestions.length),h.Cb(2),h.mc("ngIf",t.isLoadingViewVisible),h.Cb(1),h.mc("ngIf",t.isErrorViewVisible),h.Cb(1),h.mc("ngIf",t.isEmptyViewVisible),h.Cb(1),h.mc("ngIf",t.isContentViewVisible&&!(null!=t.layout&&t.layout.enabled)),h.Cb(1),h.mc("ngIf",t.isContentViewVisible&&(null==t.layout?null:t.layout.enabled)))},directives:[r.s,r.Y,r.k,r.g,r.h,r.K,r.ib,r.p,r.F,r.G,d.l,r.r,r.A,d.k,r.x,r.z,r.T,r.P,p.a,r.J,r.o,m.a,r.H],pipes:[v.c],styles:['ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-light)}ion-grid[_ngcontent-%COMP%]{background:#fff}ion-searchbar[_ngcontent-%COMP%]{padding:0 8px!important}ion-buttons[_ngcontent-%COMP%]{align-self:center}.card[_ngcontent-%COMP%]{height:200px;position:relative;overflow:hidden}.card[_ngcontent-%COMP%]   .bg-img[_ngcontent-%COMP%]{background-size:cover;background-position:50%;position:absolute;top:0;bottom:0;left:0;right:0}.card[_ngcontent-%COMP%]   .bg-img[_ngcontent-%COMP%]:after{content:"";position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(0,0,0,.3)}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;align-self:center;justify-content:center;padding:10px;text-align:center;height:100%}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{z-index:1}.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--ion-color-primary),var(--ion-color-primary-tint));border-radius:16px;padding:4px 16px}@media (min-width:992px){ion-col[_ngcontent-%COMP%]{margin:16px 0}}'],data:{animation:[Object(b.l)("staggerIn",[Object(b.k)("* => *",[Object(b.f)(":enter",Object(b.j)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(b.f)(":enter",Object(b.h)("40ms",[Object(b.e)("100ms",Object(b.j)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),S),F=n("d2mR"),j=((I=function e(){_classCallCheck(this,e)}).\u0275mod=h.Nb({type:I}),I.\u0275inj=h.Mb({factory:function(e){return new(e||I)},imports:[[i.i.forChild([{path:"",component:U}]),F.a]]}),I)}}]);